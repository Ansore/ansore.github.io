---
title: 身份证号码验证算法
tags:
  - C/C++
  - 算法
  - 编程
categories:
  - 编程
abbrlink: 84e6c10f
date: 2016-09-14 00:59:37
---

### 一、18位身份证号码结构

身份证号码由前十七位本体码和最后一位校验码组成

排列次序一次依次是：六位数字地址码，八位数字出生日期码，三位数字顺序码和一位校验码

### 二、校验值计算

1.本体码加权求和

公式为：S = SUM(Ai*Bi);

-Ai为身份证上第i个数字

-Bi为第i个加权因子（加权因子：7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2）

2.计算模

mode = S % 11;

3.查找相应校验码

校验码：1 0 X 9 8 7 6 5 4 3 2 （第mode个）

### 三、C语言实现

```c
#include <stdio.h>

/**
* 身份证验证算法
*/

int main(int argc, char const *argv[]) {

 //获得校验码
 char getValidateCode(char *idcard);

 //验证身份证
 int getValidateResult(char * idcard,char validateCode);

 //存储身份证号码
 char * idcard="122222190904057081";

 char code = getValidateCode(idcard);
 int result = getValidateResult(idcard,code);

 printf("validatecode is %c\n",code);

 if(result==1){
 printf("身份证号码正确\n");
 }
 else {
 printf("身份证号码不正确\n");
 }

 return 0;
}

/**
* 获取身份证校验码（最后一位）
*/
char getValidateCode(char *idcard){

 int weight[17] = {7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2};

 char validate[11] = {'1','0','X','9','8','7','6','5','4','3','2'};

 int i,sum=0,mode;

 for(i=0;i<17;i++){
 sum = sum + (idcard[i] - '0') * weight[i];
 }

 //计算模
 mode = sum%11;

 return validate[mode];
}

//得到验证结果 0不正确 1正确
int getValidateResult(char * idcard,char validateCode){
 int result = 0;
 if(idcard[17]==validateCode){
 result = 1;
 }
 return result;
}
```